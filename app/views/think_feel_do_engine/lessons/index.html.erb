<h1>Lessons</h1>

<div class="btn btn-toolbar" style="padding: 0px;">
	<%= link_to "New Lesson", new_lesson_path, class: "btn btn-default" %>
</div>

<table class="table table-hover">
	<thead>
		<tr>
			<th>Position</th>
			<th>Title</th>
			<th>No. of Slides</th>
			<th>Created At</th>
			<th>Updated At</th>
			<th></th>
		</tr>
	</thead>
  <tbody id="sortable-slides" data-update-url="<%= sort_lessons_url(@lesson) %>">
		<% @lessons.includes(content_providers: :source_content).each do |lesson| %>
			<tr id="lesson-<%= lesson.id %>">
				<td><span class="handle"><%= fa_icon("sort", class: "fa-lg") %></span><td>
					<%= link_to lesson.pretty_title, lesson_path(lesson) %>
				</td>
				<td><%= lesson.slides.count %></td>
				<td><%= lesson.created_at.to_s :date_time_with_meridian %></td>
				<td><%= lesson.updated_at.to_s :date_time_with_meridian %></td>
				<td>
					<%= link_to "Edit", edit_lesson_path(lesson), class: "btn btn-default" %>
					<%= link_to "Delete", lesson_path(lesson), :method => :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-danger" %>
				</td>
			</tr>
		<% end %>
	</tbody>
</table>
